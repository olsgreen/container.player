!function(o,e,t){var n=e.ContainerPlayer={};"function"!=typeof Object.create&&(Object.create=function(o){function e(){}return e.prototype=o,new e});var i={defaults:{autoplay:!0,loop:!0,muted:!0,controls:!1,ratio:16/9,fitContainer:!0,forceAspect:!1},init:function(t,n){var i=this;if(i.$window=o(e),"BODY"===t.tagName?(i.$container=o('<div class="container-player fullscreen-background"></div>'),o(t).append(i.$container)):i.$container=o(t),i.options=o.extend(!0,{},i.defaults,n),i.ID=parseInt(1e6*Math.random()),i.outerID="containerPlayerOuter"+i.ID,i.innerID="containerPlayerInner"+i.ID,i.overlayID="containerPlayerOverlay"+i.ID,i.createContainer(),"object"==typeof this.options.youTube)this.adapter=Object.create(r),i.$container.addClass("youtube");else{if("object"!=typeof this.options.html5)throw"Invalid options passed, no adapter configuration found.";this.adapter=Object.create(a),i.$container.addClass("html5")}return this.adapter.init(this),i.$window.on("resize.ContainerPlayer"+i.ID,function(){i.resize()}),i.resize(i),i},setDimensions:function(o){this.options.width=o.width(),this.options.height=o.height()},createContainer:function(){var e=this;e.player={},e.player.$outer=o('<div id="'+e.outerID+'" class="container-player-outer"></div>'),e.player.$inner=o('<div id="'+e.innerID+'" class="container-player-inner"></div>'),e.options.overlay&&(e.player.$overlay=o('<div id="'+e.overlayID+'" class="container-player-overlay"></div>'),"undefined"!=typeof e.options.overlay.opacity&&e.player.$overlay.css("opacity",e.options.overlay.opacity),"undefined"!=typeof e.options.overlay.color&&e.player.$overlay.css("background-color",e.options.overlay.color),"undefined"!=typeof e.options.overlay.image&&(e.player.$overlay.css("background-image","url("+e.options.overlay.image+")"),"undefined"!=typeof e.options.overlay.backgroundSize&&e.player.$overlay.css("background-size","url("+e.options.overlay.backgroundSize+")"),"undefined"!=typeof e.options.overlay.backgroundRepeat&&e.player.$overlay.css("background-repeat","url("+e.options.overlay.backgroundRepeat+")")),e.$container.append(e.player.$overlay)),e.$container.append(e.player.$outer.append(e.player.$inner))},videoLoaded:function(){this.$container.addClass("loaded").trigger("video.loaded",this)},videoPlaying:function(){this.$container.removeClass("paused").addClass("playing").trigger("video.playing",this)},videoPaused:function(){this.$container.removeClass("playing").addClass("paused").trigger("video.paused",this)},videoEnded:function(){this.$container.removeClass("playing").trigger("video.ended",this)},resize:function(){var e=this;e.setDimensions(e.$container);var t,n,i=o("#"+e.innerID);return e.options.forceAspect?(n=(e.options.width/e.options.ratio).toFixed(3),e.$container.height(n),void i.width(e.options.width).css({left:0,top:0,height:n})):(e.options.fitContainer&&e.options.width/e.options.ratio<e.options.height?(t=Math.ceil(e.options.height*e.options.ratio),i.width(t).height(e.options.height).css({left:(e.options.width-t)/2,top:0})):(n=Math.ceil(e.options.width/e.options.ratio),i.width(e.options.width).height(n).css({left:0,top:(e.options.height-n)/2})),void(i=null))}},a={defaults:{html5:{sources:[],props:{preload:"auto",crossorigin:null}}},init:function(e){var t=this;t.containerPlayer=e,t.options=o.extend(!0,{},t.defaults,t.containerPlayer.options),"undefined"!=typeof t.options.html5.src&&0===t.options.html5.sources.length&&(t.options.html5.props.src=t.options.html5.src),"undefined"!=typeof t.options.html5.poster&&t.containerPlayer.player.$outer.css("background-image","url("+t.options.html5.poster+")"),"undefined"==typeof t.options.html5.props.autoplay&&(t.options.html5.props.autoplay=t.options.autoplay),"undefined"==typeof t.options.html5.props.loop&&(t.options.html5.props.loop=t.options.loop),"undefined"==typeof t.options.html5.props.controls&&(t.options.html5.props.controls=t.options.controls),"undefined"==typeof t.options.html5.props.muted&&(t.options.html5.props.muted=t.options.muted),t.createHTML5Video()},createHTML5Video:function(){o("#"+this.innerID);this.$video=o("<video>Your browser doesn't support HTML5 video tag.</video>"),this.$video.on("canplay playing pause",this.onPlayerStateChange.bind(this));for(var e in this.options.html5.props){var t=this.options.html5.props[e];t&&this.$video.prop(e,t)}for(var n in this.options.html5.sources)this.$video.append(o("<source></source>").prop("src",this.options.html5.sources[n][1]).prop("type",this.options.html5.sources[n][0]));this.containerPlayer.player.$inner.append(this.$video)},onPlayerStateChange:function(o){switch(o.type){case"canplay":this.containerPlayer.videoLoaded();break;case"playing":this.containerPlayer.videoPlaying();break;case"pause":this.containerPlayer.videoPaused();break;case"ended":this.containerPlayer.videoEnded()}}},r={defaults:{youTube:{videoId:"",playerVars:{iv_load_policy:3,modestbranding:1,showinfo:0,wmode:"opaque",branding:0,autohide:1,rel:0}}},init:function(e){var t=this;"undefined"==typeof n.YouTube&&(n.YouTube={apiLoading:!1,onApiLoad:o.Deferred()}),t.containerPlayer=e,t.options=o.extend(!0,{},t.defaults,t.containerPlayer.options),"undefined"!=typeof t.options.youTube.poster&&t.containerPlayer.player.$outer.css("background-image","url("+t.options.youTube.poster+")"),"undefined"==typeof t.options.youTube.playerVars.autoplay&&(t.options.youTube.playerVars.autoplay=t.options.autoplay?1:0),"undefined"==typeof t.options.youTube.playerVars.loop&&(t.options.youTube.playerVars.loop=t.options.loop?1:0,t.options.loop&&"undefined"==typeof t.options.youTube.playerVars.playlist&&(t.options.youTube.playerVars.playlist=t.options.youTube.videoId)),"undefined"==typeof t.options.youTube.playerVars.controls&&(t.options.youTube.playerVars.controls=t.options.controls?1:0),t.whenApiLoaded(t.setupPlayer.bind(t))},loadAPI:function(){var o=t.createElement("script"),n=t.getElementsByTagName("head")[0];"file://"==e.location.origin?o.src="http://www.youtube.com/iframe_api":o.src="//www.youtube.com/iframe_api",n.appendChild(o),n=null,o=null},whenApiLoaded:function(o){return"object"==typeof YT?void o():("undefined"==typeof YT&&n.YouTube.apiLoading===!1&&(n.YouTube.apiLoading=!0,e.onYouTubeIframeAPIReady=function(){e.onYouTubeIframeAPIReady=null,n.YouTube.onApiLoad.resolve()},this.loadAPI()),void n.YouTube.onApiLoad.done(function(){o()}))},setupPlayer:function(){var o=this;o.player=new YT.Player(o.containerPlayer.innerID,{videoId:o.options.youTube.videoId,playerVars:o.options.youTube.playerVars,events:{onReady:o.onPlayerReady.bind(o),onStateChange:o.onPlayerStateChange.bind(o)}})},onPlayerReady:function(o){this.containerPlayer.videoLoaded(),this.options.muted&&o.target.mute()},onPlayerStateChange:function(o){switch(o.data){case YT.PlayerState.PLAYING:this.containerPlayer.videoPlaying();break;case YT.PlayerState.PAUSED:this.containerPlayer.videoPaused();break;case YT.PlayerState.ENDED:this.containerPlayer.videoEnded()}}};o.fn.ContainerPlayer=function(e){return this.each(function(){var t=this;o(t).data("ctplayer-init",!0);var n=Object.create(i);n.init(t,e),o.data(t,"ctPlayer",n)})}}(jQuery,window,document);