!function(e,t,o){var i=t.ContainerPlayer={};"function"!=typeof Object.create&&(Object.create=function(e){function t(){}return t.prototype=e,new t}),String.prototype.replaceAll=function(e,t){var o=this;return o.replace(new RegExp(e,"g"),t)};var n={defaults:{autoplay:!0,loop:!0,muted:!0,controls:!1,ratio:16/9,fitContainer:!0,forceAspect:!1},init:function(o,i){var n=this;return n.$window=e(t),n.$container=e(o),n.$dataContainer=n.$container,n.options=e.extend(!0,{},n.defaults,i),n.ID=parseInt(1e6*Math.random()),n.outerID="containerPlayerOuter"+n.ID,n.innerID="containerPlayerInner"+n.ID,n.posterID="containerPlayerPoster"+n.ID,n.overlayID="containerPlayerOverlay"+n.ID,n.resizeEventID="resize.ContainerPlayer"+n.ID,"BODY"===o.tagName&&(n.$container=e('<div class="container-player fullscreen-background"></div>'),e(o).append(n.$container)),n.createPlayerDOM(),n.adapter=n.detectAdapter(),n.adapter.init(n),n.$window.on(n.resizeEventID,n.resize.bind(n)).trigger(n.resizeEventID),n.$dataContainer.trigger("player.initialised",[n]),n},detectAdapter:function(){if("object"==typeof this.options.youTube)return Object.create(s);if("object"==typeof this.options.vimeo)return Object.create(VimeoAdapter);if("object"==typeof this.options.html5)return Object.create(r);throw"Invalid options passed, no adapter configuration found."},createPlayerDOM:function(){var t=this;t.player={},t.player.$outer=e('<div id="'+t.outerID+'" class="container-player-outer"></div>'),t.player.$inner=e('<div id="'+t.innerID+'" class="container-player-inner"></div>'),t.player.$poster=e('<div id="'+t.posterID+'" class="container-player-poster"></div>'),t.$container.append(t.player.$outer.append(t.player.$poster,t.player.$inner)),t.options.overlay&&(t.player.$overlay=e('<div id="'+t.overlayID+'" class="container-player-overlay"></div>'),"undefined"!=typeof t.options.overlay["class"]&&t.player.$overlay.addClass(t.options.overlay["class"]),"undefined"!=typeof t.options.overlay.opacity&&t.player.$overlay.css("opacity",t.options.overlay.opacity),"undefined"!=typeof t.options.overlay.color&&t.player.$overlay.css("background-color",t.options.overlay.color),"undefined"!=typeof t.options.overlay.image&&(t.player.$overlay.css("background-image","url("+t.options.overlay.image+")"),"undefined"!=typeof t.options.overlay.backgroundSize&&t.player.$overlay.css("background-size","url("+t.options.overlay.backgroundSize+")"),"undefined"!=typeof t.options.overlay.backgroundRepeat&&t.player.$overlay.css("background-repeat","url("+t.options.overlay.backgroundRepeat+")")),t.$container.append(t.player.$overlay))},setPoster:function(e){this.player.$poster.css("background-image","url("+e+")")},resize:function(){var t,i,n=this;return n.options.width=n.$container.width(),n.options.height=n.$container.height(),e.contains(o,n.player.$inner[0])||(n.player.$inner=e("#"+n.innerID)),n.options.forceAspect?(i=(n.options.width/n.options.ratio).toFixed(3),n.$container.height(i),void e([n.player.$inner,n.player.$poster]).each(function(){e(this).css({left:0,top:0,height:i,width:n.options.width})})):(n.options.fitContainer&&n.options.width/n.options.ratio<n.options.height?(t=Math.ceil(n.options.height*n.options.ratio),e([n.player.$inner,n.player.$poster]).each(function(){e(this).width(t).height(n.options.height).css({left:(n.options.width-t)/2,top:0})})):(i=Math.ceil(n.options.width/n.options.ratio),e([n.player.$inner,n.player.$poster]).each(function(){e(this).width(n.options.width).height(i).css({left:0,top:(n.options.height-i)/2})})),void n.$dataContainer.trigger("player.resized",[n]))},videoLoaded:function(){this.$container.addClass("loaded"),this.$dataContainer.trigger("video.loaded",[this])},videoPlaying:function(){this.$container.removeClass("paused").addClass("playing"),this.$dataContainer.trigger("video.playing",[this])},videoPaused:function(){this.$container.removeClass("playing").addClass("paused"),this.$dataContainer.trigger("video.paused",[this])},videoEnded:function(){this.$container.removeClass("playing"),this.$dataContainer.trigger("video.ended",[this])},destroy:function(){this.adapter.destroy(),this.player.$inner.remove(),this.player.$outer.remove(),this.player.$poster.remove(),this.player.$overlay&&this.player.$overlay.remove(),this.$window.unbind(this.resizeEventID),this.$container.unbind(),this.$container.empty(),this.$container.removeClass("playing paused loaded transition-in"),this.$dataContainer.trigger("player.destroyed"),this.$dataContainer.removeData("player");for(var e in this)this[e]=null},play:function(){this.adapter.play()},pause:function(){this.adapter.pause()},goTo:function(e){this.adapter.goTo(e)},volume:function(e){this.adapter.volume(e)},mute:function(){this.adapter.mute()},unMute:function(){this.adapter.unMute()}},a={defaults:{},init:function(e){throw"Not implemented"},destroy:function(){throw"Not implemented"},play:function(){throw new Error("Not implemented")},pause:function(){throw new Error("Not implemented")},goTo:function(e){throw new Error("Not implemented")},volume:function(e){throw new Error("Not implemented")},mute:function(){throw new Error("Not implemented")},unMute:function(){throw new Error("Not implemented")}},r=e.extend(Object.create(a),{defaults:{sources:[],props:{preload:"auto",crossorigin:null}},init:function(t){this.containerPlayer=t,this.options=e.extend(!0,{},this.defaults,this.containerPlayer.options.html5),this.containerPlayer.$container.addClass("html5"),"undefined"!=typeof this.options.src&&0===this.options.sources.length&&(this.options.props.src=this.options.src),"undefined"!=typeof this.options.poster&&(this.containerPlayer.setPoster(this.options.poster),this.options.props.poster=this.options.poster),"undefined"==typeof this.options.props.autoplay&&(this.options.props.autoplay=this.containerPlayer.options.autoplay),"undefined"==typeof this.options.props.loop&&(this.options.props.loop=this.containerPlayer.options.loop),"undefined"==typeof this.options.props.controls&&(this.options.props.controls=this.containerPlayer.options.controls),"undefined"==typeof this.options.props.muted&&(this.options.props.muted=this.containerPlayer.options.muted),this.createHTML5Video()},createHTML5Video:function(){this.$video=e("<video></video>").html("Your browser doesn't support HTML5 video tag.").on("canplay playing pause ended",this.onPlayerStateChange.bind(this));for(var t in this.options.props){var o=this.options.props[t];o&&this.$video.prop(t,o)}for(var i in this.options.sources)this.$video.append(e("<source></source>").prop("src",this.options.sources[i][1]).prop("type",this.options.sources[i][0]));this.containerPlayer.player.$inner.append(this.$video)},onPlayerStateChange:function(e){switch(e.type){case"canplay":this.containerPlayer.videoLoaded();break;case"playing":this.containerPlayer.videoPlaying();break;case"pause":this.containerPlayer.videoPaused();break;case"ended":this.containerPlayer.videoEnded()}},destroy:function(){this.pause(),this.$video.prop("src","#"),this.$video.remove(),this.containerPlayer.$container.removeClass("html5");for(var e in this)this[e]=null},play:function(){this.$video[0].play()},pause:function(){this.$video[0].pause()},goTo:function(e){this.$video[0].currentTime=e},volume:function(e){this.$video[0].volume=e/100},mute:function(){this.$video[0].muted=!0},unMute:function(){this.$video[0].muted=!1}}),s=e.extend(Object.create(a),{defaults:{videoId:"",tranitionIn:!1,playerVars:{iv_load_policy:3,modestbranding:1,showinfo:0,wmode:"opaque",branding:0,autohide:1,rel:0}},init:function(t){var o=this;o.containerPlayer=t,this.containerPlayer.$container.addClass("youtube"),o.options=e.extend(!0,{},o.defaults,o.containerPlayer.options.youTube),"undefined"!=typeof o.options.poster&&o.containerPlayer.setPoster(this.options.poster),"undefined"==typeof o.options.playerVars.autoplay&&(o.options.playerVars.autoplay=o.containerPlayer.options.autoplay?1:0),"undefined"==typeof o.options.playerVars.controls&&(o.options.playerVars.controls=o.containerPlayer.options.controls?1:0),this.options.tranitionIn&&this.containerPlayer.$container.addClass("transition-in"),"undefined"==typeof i.YouTube&&(i.YouTube={apiLoading:!1,onApiLoad:e.Deferred()}),o.whenApiIsReady(o.createPlayer.bind(o)),o.loadApi()},whenApiIsReady:function(e){return"object"==typeof YT?void e():void i.YouTube.onApiLoad.done(function(){e()})},loadApi:function(){if("undefined"==typeof YT&&i.YouTube.apiLoading===!1){i.YouTube.apiLoading=!0,t.onYouTubeIframeAPIReady=function(){t.onYouTubeIframeAPIReady=null,i.YouTube.onApiLoad.resolve()};var e=o.createElement("script"),n=o.getElementsByTagName("head")[0];"file://"==t.location.origin?e.src="http://www.youtube.com/iframe_api":e.src="//www.youtube.com/iframe_api",n.appendChild(e),n=null,e=null}},createPlayer:function(){var e=this;e.player=new YT.Player(e.containerPlayer.innerID,{videoId:e.options.videoId,playerVars:e.options.playerVars,events:{onReady:e.onPlayerReady.bind(e),onStateChange:e.onPlayerStateChange.bind(e)}})},onPlayerReady:function(e){this.containerPlayer.videoLoaded(),this.containerPlayer.options.muted&&e.target.mute()},onPlayerStateChange:function(e){var t=this;switch(e.data){case YT.PlayerState.PLAYING:var o=setInterval(function(){t.player.getCurrentTime()>=.26&&(clearInterval(o),t.containerPlayer.videoPlaying())},50);break;case YT.PlayerState.PAUSED:this.containerPlayer.videoPaused();break;case YT.PlayerState.ENDED:this.containerPlayer.videoEnded(),this.containerPlayer.options.loop&&(this.goTo(0),this.play())}},destroy:function(){this.pause(),this.player.destroy(),this.containerPlayer.$container.removeClass("youtube");for(var e in this)this[e]=null},play:function(){this.player.playVideo()},pause:function(){this.player.pauseVideo()},goTo:function(e){this.player.seekTo(e)},mute:function(){this.player.mute()},unMute:function(){this.player.unMute()},volume:function(e){this.player.setVolume(e),this.player.unMute()}});VimeoAdapter=e.extend(Object.create(a),{defaults:{videoId:"",transitionIn:!1,playerVars:{autopause:!1,byline:!1,color:"00adef",portrait:!1,title:!1,controls:!1}},init:function(t){var o=this;o.containerPlayer=t,this.containerPlayer.$container.addClass("vimeo"),o.options=e.extend(!0,{},o.defaults,o.containerPlayer.options.vimeo),o.options.playerVars.id=o.options.videoId,"undefined"==typeof i.Vimeo&&(i.Vimeo={apiLoading:!1,onApiLoad:e.Deferred(),apiCheckInterval:null}),"undefined"!=typeof o.options.poster&&o.containerPlayer.setPoster(this.options.poster),"undefined"==typeof o.options.playerVars.autoplay&&(o.options.playerVars.autoplay=o.containerPlayer.options.autoplay),"undefined"==typeof o.options.playerVars.controls&&(o.options.playerVars.background=!o.containerPlayer.options.controls),"undefined"==typeof this.options.playerVars.loop&&(this.options.playerVars.loop=this.containerPlayer.options.loop),this.options.tranitionIn&&this.containerPlayer.$container.addClass("transition-in"),o.whenApiIsReady(o.createPlayer.bind(this)),o.loadApi()},whenApiIsReady:function(e){return"object"==typeof Vimeo?void e():void i.Vimeo.onApiLoad.done(function(){e()})},loadApi:function(){if("undefined"==typeof Vimeo&&i.Vimeo.apiLoading===!1){i.Vimeo.apiLoading=!0,i.Vimeo.apiCheckInterval=setInterval(function(){"undefined"!=typeof Vimeo&&(clearInterval(i.Vimeo.apiCheckInterval),i.Vimeo.onApiLoad.resolve())},100);var e=o.createElement("script"),n=o.getElementsByTagName("head")[0];"file://"==t.location.origin?e.src="http://player.vimeo.com/api/player.js":e.src="//player.vimeo.com/api/player.js",n.appendChild(e),n=null,e=null}},getVideoUrl:function(){var o,i;return i=e.param(this.options.playerVars).replaceAll("false","0").replaceAll("true","1"),o="file://"==t.location.origin?"http://player.vimeo.com/video/":"//player.vimeo.com/video/",o+this.options.videoId+"?"+i},createPlayer:function(){var t=e("<iframe></iframe>");t.prop("src",this.getVideoUrl()),t.prop("frameborder","0"),t.prop("allowfullscreen","1"),t.prop("allow","autoplay; encrypted-media"),this.containerPlayer.player.$inner.append(t),this.player=new Vimeo.Player(t[0]),this.containerPlayer.options.muted&&this.player.setVolume(0);var o={duration:null,percent:0,seconds:0};this.player.on("progress",function(e){0===o.seconds&&e.seconds>o.seconds&&(this.containerPlayer.videoPlaying(),o=e)}.bind(this)),this.player.on("play",this.containerPlayer.videoPlaying.bind(this.containerPlayer)),this.player.on("pause",this.containerPlayer.videoPaused.bind(this.containerPlayer)),this.player.on("ended",this.containerPlayer.videoEnded.bind(this.containerPlayer)),this.player.on("loaded",this.containerPlayer.videoLoaded.bind(this.containerPlayer)),t=null},destroy:function(){this.pause(),this.containerPlayer.$container.addClass("vimeo"),this.player.unload();for(var e in this)this[e]=null},play:function(){this.player.play()},pause:function(){this.player.pause()},goTo:function(e){this.player.setCurrentTime(e)},volume:function(e){this.player.setVolume(e/100)},mute:function(){this.player.setVolume(0),this.initialPlayerVolume=this.player.getVolume()},unMute:function(){this.player.setVolume(this.initialPlayerVolume||.7)}}),e.fn.ContainerPlayer=function(t){return this.each(function(){var o=Object.create(n);o.init(this,t),e.data(this,"player",o),o=null})}}(jQuery,window,document);