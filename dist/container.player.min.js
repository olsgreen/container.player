!function(e,o,t){var i=o.ContainerPlayer={};"function"!=typeof Object.create&&(Object.create=function(e){function o(){}return o.prototype=e,new o});var n={defaults:{autoplay:!0,loop:!0,muted:!0,controls:!1,ratio:16/9,fitContainer:!0,forceAspect:!1},init:function(t,i){var n=this;return n.$window=e(o),n.$container=e(t),n.options=e.extend(!0,{},n.defaults,i),n.ID=parseInt(1e6*Math.random()),n.outerID="containerPlayerOuter"+n.ID,n.innerID="containerPlayerInner"+n.ID,n.overlayID="containerPlayerOverlay"+n.ID,n.resizeEventID="resize.ContainerPlayer"+n.ID,"BODY"===t.tagName&&(n.$container=e('<div class="container-player fullscreen-background"></div>'),e(t).append(n.$container)),n.createPlayerDOM(),n.adapter=n.detectAdapter(),n.adapter.init(n),n.$window.on(n.resizeEventID,n.resize.bind(n)).trigger(n.resizeEventID),n},detectAdapter:function(){if("object"==typeof this.options.youTube)return this.$container.addClass("youtube"),Object.create(s);if("object"==typeof this.options.html5)return this.$container.addClass("html5"),Object.create(r);throw"Invalid options passed, no adapter configuration found."},createPlayerDOM:function(){var o=this;o.player={},o.player.$outer=e('<div id="'+o.outerID+'" class="container-player-outer"></div>'),o.player.$inner=e('<div id="'+o.innerID+'" class="container-player-inner"></div>'),o.options.overlay&&(o.player.$overlay=e('<div id="'+o.overlayID+'" class="container-player-overlay"></div>'),"undefined"!=typeof o.options.overlay["class"]&&o.player.$overlay.addClass(o.options.overlay["class"]),"undefined"!=typeof o.options.overlay.opacity&&o.player.$overlay.css("opacity",o.options.overlay.opacity),"undefined"!=typeof o.options.overlay.color&&o.player.$overlay.css("background-color",o.options.overlay.color),"undefined"!=typeof o.options.overlay.image&&(o.player.$overlay.css("background-image","url("+o.options.overlay.image+")"),"undefined"!=typeof o.options.overlay.backgroundSize&&o.player.$overlay.css("background-size","url("+o.options.overlay.backgroundSize+")"),"undefined"!=typeof o.options.overlay.backgroundRepeat&&o.player.$overlay.css("background-repeat","url("+o.options.overlay.backgroundRepeat+")")),o.$container.append(o.player.$overlay)),o.$container.append(o.player.$outer.append(o.player.$inner))},resize:function(){var o,i,n=this;return n.options.width=n.$container.width(),n.options.height=n.$container.height(),e.contains(t,n.player.$inner[0])||(n.player.$inner=e("#"+n.innerID)),n.options.forceAspect?(i=(n.options.width/n.options.ratio).toFixed(3),n.$container.height(i),void n.player.$inner.css({left:0,top:0,height:i,width:n.options.width})):void(n.options.fitContainer&&n.options.width/n.options.ratio<n.options.height?(o=Math.ceil(n.options.height*n.options.ratio),n.player.$inner.width(o).height(n.options.height).css({left:(n.options.width-o)/2,top:0})):(i=Math.ceil(n.options.width/n.options.ratio),n.player.$inner.width(n.options.width).height(i).css({left:0,top:(n.options.height-i)/2})))},videoLoaded:function(){this.$container.addClass("loaded").trigger("video.loaded",this)},videoPlaying:function(){this.$container.removeClass("paused").addClass("playing").trigger("video.playing",this)},videoPaused:function(){this.$container.removeClass("playing").addClass("paused").trigger("video.paused",this)},videoEnded:function(){this.$container.removeClass("playing").trigger("video.ended",this)},play:function(){this.adapter.play()},pause:function(){this.adapter.pause()},goTo:function(e){this.adapter.goTo(e)}},a={defaults:{},init:function(e){throw"Not implemented"},play:function(){throw"Not implemented"},pause:function(){throw"Not implemented"},goTo:function(){throw"Not implemented"}},r=e.extend(Object.create(a),{defaults:{sources:[],props:{preload:"auto",crossorigin:null}},init:function(o){this.containerPlayer=o,this.options=e.extend(!0,{},this.defaults,this.containerPlayer.options.html5),"undefined"!=typeof this.options.src&&0===this.options.sources.length&&(this.options.props.src=this.options.src),"undefined"!=typeof this.options.poster&&(this.containerPlayer.player.$outer.css("background-image","url("+this.options.poster+")"),this.options.props.poster=this.options.poster),"undefined"==typeof this.options.props.autoplay&&(this.options.props.autoplay=this.containerPlayer.options.autoplay),"undefined"==typeof this.options.props.loop&&(this.options.props.loop=this.containerPlayer.options.loop),"undefined"==typeof this.options.props.controls&&(this.options.props.controls=this.containerPlayer.options.controls),"undefined"==typeof this.options.props.muted&&(this.options.props.muted=this.containerPlayer.options.muted),this.createHTML5Video()},createHTML5Video:function(){this.$video=e("<video></video>").html("Your browser doesn't support HTML5 video tag.").on("canplay playing pause ended",this.onPlayerStateChange.bind(this));for(var o in this.options.props){var t=this.options.props[o];t&&this.$video.prop(o,t)}for(var i in this.options.sources)this.$video.append(e("<source></source>").prop("src",this.options.sources[i][1]).prop("type",this.options.sources[i][0]));this.containerPlayer.player.$inner.append(this.$video)},onPlayerStateChange:function(e){switch(e.type){case"canplay":this.containerPlayer.videoLoaded();break;case"playing":this.containerPlayer.videoPlaying();break;case"pause":this.containerPlayer.videoPaused();break;case"ended":this.containerPlayer.videoEnded()}},play:function(){this.$video[0].play()},pause:function(){this.$video[0].pause()},goTo:function(e){this.$video[0].currentTime=e}}),s=e.extend(Object.create(a),{defaults:{videoId:"",playerVars:{iv_load_policy:3,modestbranding:1,showinfo:0,wmode:"opaque",branding:0,autohide:1,rel:0}},init:function(o){var t=this;t.containerPlayer=o,t.options=e.extend(!0,{},t.defaults,t.containerPlayer.options.youTube),"undefined"!=typeof t.options.poster&&t.containerPlayer.player.$outer.css("background-image","url("+t.options.poster+")"),"undefined"==typeof t.options.playerVars.autoplay&&(t.options.playerVars.autoplay=t.containerPlayer.options.autoplay?1:0),"undefined"==typeof t.options.playerVars.controls&&(t.options.playerVars.controls=t.containerPlayer.options.controls?1:0),"undefined"==typeof i.YouTube&&(i.YouTube={apiLoading:!1,onApiLoad:e.Deferred()}),t.whenApiIsReady(t.createPlayer.bind(t)),t.loadApi()},whenApiIsReady:function(e){return"object"==typeof YT?void e():void i.YouTube.onApiLoad.done(function(){e()})},loadApi:function(){if("undefined"==typeof YT&&i.YouTube.apiLoading===!1){i.YouTube.apiLoading=!0,o.onYouTubeIframeAPIReady=function(){o.onYouTubeIframeAPIReady=null,i.YouTube.onApiLoad.resolve()};var e=t.createElement("script"),n=t.getElementsByTagName("head")[0];"file://"==o.location.origin?e.src="http://www.youtube.com/iframe_api":e.src="//www.youtube.com/iframe_api",n.appendChild(e),n=null,e=null}},createPlayer:function(){var e=this;e.player=new YT.Player(e.containerPlayer.innerID,{videoId:e.options.videoId,playerVars:e.options.playerVars,events:{onReady:e.onPlayerReady.bind(e),onStateChange:e.onPlayerStateChange.bind(e)}})},onPlayerReady:function(e){this.containerPlayer.videoLoaded(),this.containerPlayer.options.muted&&e.target.mute()},onPlayerStateChange:function(e){switch(e.data){case YT.PlayerState.PLAYING:this.containerPlayer.videoPlaying();break;case YT.PlayerState.PAUSED:this.containerPlayer.videoPaused();break;case YT.PlayerState.ENDED:this.containerPlayer.videoEnded(),this.containerPlayer.options.loop&&(this.goTo(0),this.play())}},play:function(){this.player.playVideo()},pause:function(){this.player.pauseVideo()},goTo:function(e){this.player.seekTo(e)}});e.fn.ContainerPlayer=function(o){return this.each(function(){var t=this,i=Object.create(n);i.init(t,o),e.data(t,"player",i)})}}(jQuery,window,document);